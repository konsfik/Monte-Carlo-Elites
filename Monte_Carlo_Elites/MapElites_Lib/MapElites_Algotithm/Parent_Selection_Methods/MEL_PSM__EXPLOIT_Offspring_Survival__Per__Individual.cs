using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

using Common_Tools.Elements;
using Common_Tools.Utilities;

namespace MapElites_Lib
{
    public class MEL_PSM__EXPLOIT_Offspring_Survival__Per__Individual<T> : MEL__Parent_Selection_Method<T>
        where T:MEL__Individual
    {
        public override Vec2i Select_Parent_Coordinates(Random randomness_provider, MEL__Algorithm<T> map_elites)
        {
            double[,] exploit_table = MEL_PSM__Help_Methods.EXPLOIT_Table_Calculation(
                map_elites.state.individual_exists,
                map_elites.state.selections__per__individual,
                map_elites.state.offspring_survivals__per__individual,
                out double highest_exploit_value
                );

            Vec2i selected_coordinates = MEL_PSM__Help_Methods.Best_Value_Coordinates(
                randomness_provider,
                map_elites.state.individual_exists,
                exploit_table,
                highest_exploit_value
                );

            return selected_coordinates;
        }

        public override string ToString()
        {
            return this.GetType().Name.ToString();
        }
    }
}
